@model TimeTrackerApp.Models.ViewModels.CreateEmployeeViewModel

@{
    ViewData["Title"] = "Dodaj pracownika";
    var isAdmin = User.IsInRole("Admin");
}

<div class="card" style="max-width: 800px; margin: 2rem auto;">
    <h2>Dodaj nowego pracownika</h2>
    <p class="hint">Wypełnij poniższy formularz, aby dodać nowego pracownika do systemu.</p>

    <form asp-action="Create" method="post" style="margin-top: 2rem;">
        <div asp-validation-summary="ModelOnly" class="alert alert-danger" style="background: rgba(239, 68, 68, 0.1); color: var(--danger); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1rem;"></div>

        <h3 style="font-size: 1.125rem; margin-bottom: 1rem; border-bottom: 1px solid var(--border-light); padding-bottom: 0.5rem;">Dane użytkownika</h3>

        <div class="form-group">
            <label asp-for="Email">Adres email</label>
            <input asp-for="Email" class="form-control" placeholder="jan.kowalski@example.com" />
            <span asp-validation-for="Email" class="hint" style="color: var(--danger);"></span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label asp-for="Password">Hasło</label>
                <input asp-for="Password" type="password" class="form-control" />
                <span asp-validation-for="Password" class="hint" style="color: var(--danger);"></span>
            </div>

            <div class="form-group">
                <label asp-for="ConfirmPassword">Potwierdź hasło</label>
                <input asp-for="ConfirmPassword" type="password" class="form-control" />
                <span asp-validation-for="ConfirmPassword" class="hint" style="color: var(--danger);"></span>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label asp-for="FirstName">Imię</label>
                <input asp-for="FirstName" class="form-control" placeholder="Jan" />
                <span asp-validation-for="FirstName" class="hint" style="color: var(--danger);"></span>
            </div>

            <div class="form-group">
                <label asp-for="LastName">Nazwisko</label>
                <input asp-for="LastName" class="form-control" placeholder="Kowalski" />
                <span asp-validation-for="LastName" class="hint" style="color: var(--danger);"></span>
            </div>
        </div>

        <div class="form-group">
            <label asp-for="Role">Rola</label>
            <select asp-for="Role" class="form-control">
                <option value="@((int)TimeTrackerApp.Models.UserRole.Employee)">Pracownik</option>
                @if (isAdmin)
                {
                    <option value="@((int)TimeTrackerApp.Models.UserRole.Manager)">Kierownik</option>
                    <option value="@((int)TimeTrackerApp.Models.UserRole.Admin)">Administrator</option>
                }
            </select>
            <span asp-validation-for="Role" class="hint" style="color: var(--danger);"></span>
            @if (!isAdmin)
            {
                <div class="hint">Jako kierownik możesz dodawać tylko pracowników.</div>
            }
        </div>

        <h3 style="font-size: 1.125rem; margin: 2rem 0 1rem; border-bottom: 1px solid var(--border-light); padding-bottom: 0.5rem;">Dane pracownika</h3>

        <div class="form-group">
            <label asp-for="Position">Stanowisko</label>
            <input asp-for="Position" class="form-control" placeholder="Programista, Tester, Manager..." />
            <span asp-validation-for="Position" class="hint" style="color: var(--danger);"></span>
        </div>

        <div class="form-group">
            <label asp-for="Department">Departament</label>
            <input asp-for="Department" class="form-control" placeholder="IT, HR, Sprzedaż..." />
            <span asp-validation-for="Department" class="hint" style="color: var(--danger);"></span>
        </div>

        <div class="form-group">
            <label asp-for="HireDate">Data zatrudnienia</label>
            <input asp-for="HireDate" type="date" class="form-control" />
            <span asp-validation-for="HireDate" class="hint" style="color: var(--danger);"></span>
        </div>

        <div style="display: flex; gap: 0.5rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">Dodaj pracownika</button>
            <a asp-action="Index" class="btn btn-secondary">Anuluj</a>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
